<!-- frontend/src/app/create-post/create-post.component.html -->
<p-toast></p-toast>
<div class="container mx-auto p-4">
  <p-card [header]="isEditMode() ? 'Edit post Post' : 'Create New post Post'" styleClass="shadow-2">
    <form [formGroup]="postForm" (ngSubmit)="onSubmit()" class="p-fluid">
      <div class="field mb-4">
        <label for="title" class="block text-900 font-medium mb-2">Title</label>
        <input class="w-full" id="title" type="text" pInputText formControlName="title" style="width: 100%;"
               [ngClass]="{ 'ng-invalid ng-dirty': postForm.get('title')?.invalid && postForm.get('title')?.touched }" />
        <small *ngIf="postForm.get('title')?.invalid && postForm.get('title')?.touched" class="p-error">Title is required.</small>
      </div>

      <div class="field mb-4 w-full">
        <label for="excerpt" class="block text-900 font-medium mb-2">Excerpt (Short Summary)</label>
        <textarea class="w-full" id="excerpt" pInputTextarea formControlName="excerpt" rows="3" style="width: 100%;"
                  [ngClass]="{ 'ng-invalid ng-dirty': postForm.get('excerpt')?.invalid && postForm.get('excerpt')?.touched }"></textarea>
        <small *ngIf="postForm.get('excerpt')?.invalid && postForm.get('excerpt')?.touched" class="p-error">Excerpt is required.</small>
      </div>

      <div class="field mb-4">
        <label for="body" class="block text-900 font-medium mb-2">Body (Full Content)</label>
        <p-editor id="body" formControlName="body" [style]="{'height':'320px'}"></p-editor>
        <small *ngIf="postForm.get('body')?.invalid && postForm.get('body')?.touched" class="p-error">Body is required.</small>
      </div>

      <div class="field-checkbox mb-4 flex align-items-center">
        <p-checkbox id="published" formControlName="published" [binary]="true"></p-checkbox>
        <label for="published" class="ml-2">Publish Now</label>
      </div>

      <div class="flex justify-content-end gap-2">
        <p-button type="button" label="Cancel" icon="pi pi-times" styleClass="p-button-outlined" (click)="router.navigate(['/dashboard'])"></p-button>
        <p-button type="submit" [label]="isEditMode() ? 'Update Post' : 'Create Post'" icon="pi pi-check" [loading]="loading()"></p-button>
      </div>
    </form>
  </p-card>
</div>
